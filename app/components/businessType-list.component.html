<permit-locator-header></permit-locator-header>
<section class="bp-list-container">
    <div class="row">
        <div class="col-md-4 selected-business-type-column">
            <div class="bp-list-type-header">REFINE YOUR RESULTS</div>
            <div class="bp-list-type-title bp-list-type-subheader no-select" (click)="onClickTogglebusinessTypes(); $event.stopPropagation();" [class.selected]="togglebusinessTypes">Business Types <i class="bp-type-title-icon fa" [ngClass]="{'fa-plus-circle': !togglebusinessTypes, 'fa-minus-circle': togglebusinessTypes}"></i>
            </div>
            <!-- All the business types -->
            <div *ngIf="displayedTypes && togglebusinessTypes">

                <!-- Each Selected Business Type-->
                <ul class="bp-list-types">
                    <li class="bp-list-types-text no-select" *ngFor="let businessType of displayedTypes" (click)="onSelectBusinessType(businessType); $event.stopPropagation()" [class.selected]="selectedBusinessTypes.has(businessType)"> {{businessType.business_type}}
                    </li>
                </ul>
            </div>
        </div>

        <!-- If Selected BusinessType  -->
        <div #selectedBusinessTypesID class="bp-types-permits">
            <div class="bp-list-type-header">FORMS TO LAUNCH YOUR BUSINESS</div>
            <div [@flyInOut] *ngIf="requiredPermitsToShow.length">
                <div class="bp-list-permits-header">Required Permits: <span *ngFor="let businessName of selectedBusinessTypes" class="bp-permit-name">{{businessName.business_type}} </span> ({{requiredPermitsToShow.length}})</div>
                <div [@flyInOut]="selectedBusinessTypes" class="bp-permit" [ngClass]="{'last': last}" *ngFor="let permit of requiredPermitsToShow; let last = last">
                    <bp-permit [permit]="permit"></bp-permit>
                </div>
            </div>
            <div [@flyInOut] *ngIf="conditionalPermitsToShow.length">
                <div class="bp-list-permits-header">Conditionally Required Permits ({{conditionalPermitsToShow.length}})</div>
                <div [@flyInOut]="selectedBusinessTypes" class="bp-permit" [ngClass]="{'last': last}" *ngFor="let permit of conditionalPermitsToShow; let last = last">
                    <bp-permit [permit]="permit"></bp-permit>
                </div>
            </div>

            <div [@flyInOut] *ngIf="requiredAllBusinessPermits.length">
                <div class="bp-list-permits-header">Required By All Businesses ({{requiredAllBusinessPermits.length}})</div>
                <div [@flyInOut]="selectedBusinessTypes" class="bp-permit" [ngClass]="{'last': last}" *ngFor="let permit of requiredAllBusinessPermits; let last = last">
                    <bp-permit [permit]="permit"></bp-permit>
                </div>
            </div>
            <div [@flyInOut] *ngIf="conditionalAllBusinessPermits.length">
                <div class="bp-list-permits-header">Conditionally Required By All Businesses ({{conditionalAllBusinessPermits.length}})</div>
                <div [@flyInOut]="selectedBusinessTypes" class="bp-permit" [ngClass]="{'last': last}" *ngFor="let permit of conditionalAllBusinessPermits; let last = last">
                    <bp-permit [permit]="permit"></bp-permit>
                </div>
            </div>
            <div [@flyInOut] *ngIf="requiredPermitsToShow.length || conditionalPermitsToShow.length" class="next-step">
                <!-- Next Steps Info -->
                <div class="bp-list-permits-header">Next Steps</div>
                <div class="row">
                    <div class="col-xs-3">
                        <img src="../../images/DOD-Logo-Horizontal.png" width="200px">
                    </div>
                    <div class="col-xs-9">
                        <b>MAKE A FIRST-STEP APPOINTMENT WITH THE DEPARTMENT OF DOING</b><br>
                        Your next step is to met with an Action Officer at the Department of Doing. This is a convenient, one-stop location where you can submit permits and forms, review zoning options, learn more about starting a business, and ask questions and recieve support.<br>
                        <div>
                            <a target="_blank" href="https://form.jotform.com/60775565475165" class="book-button">BOOK AN APPOINMENT &#8250; </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
